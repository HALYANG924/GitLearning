# Halyang's GitlearningHub

## 关于项目
这个项目用于记录本人在学习Git使用过程中所学习到的所有知识，主要以笔记的形式展示出来。  

## 关于Git
Git是一个分布式版本控制系统，是现代软件开发的基石。它能够精确追踪文件的所有变更历史，允许你回溯到任意版本。通过分支功能，开发者可以高效地进行协作，互不干扰。其分布式架构让每个成员都拥有完整的代码仓库，保障了开发的安全与灵活。 

## 笔记
### 常用指令
下面是常用到的一些Git指令：  
#### 创建版本库
- ```git init```  
这个指令可以将当前文件夹变成一个Git可以管理的代码仓库，它可以自动在文件夹下添加一个.git目录，用于跟踪管理版本库，不建议手动更改，否则有可能会破坏Git仓库的结构。

#### 添加文件
- ```git add <file>```  
这个指令能够将指定文件从工作区（Working Directory）添加到版本库（Repository）的暂存库（stage/index）中。它可以一次性提交多个文件，只需要用空格隔开即可。例如：
    ```
    git add file1.txt file2.txt
    ```

- ```git commit```  
    这个指令需要在用add把文件添加到版本库的暂存库中后使用，可以把缓存中的文件提交到当前分支（master）中，并且在指令后面可以用-m来输入本次提交的说明。例如：
    ```
    git commit -m "wrote a readme file"
    ```

#### 查询仓库状态
- ```git status```  
这个指令以让我们时刻掌握仓库当前的状态，有三种状态：
    - ```Changes not staged for commit``` ：表示文件被修改过了，但还没有准备提交，即进行了 ```git add``` ，但是未进行 ```git commit``` 的文件，这种文件有两种类型：
        - ```modified``` ：表示被修改的文件。
        - ```new file``` ：表示新添加的文件。
        - ```deleted``` ：表示被删除的文件。
    - ```Untracked files``` ：表示文件从来未添加过，即还未进行 ```git add``` 操作的文件。
    - ```Nothing to commit, working tree clean``` ：表示工作区干净，没有未进行 ```git commit``` 的文件。

- ```get diff <file>```  
这个指令是查看指定文件的修改，显示的格式是Unix通用的diff格式。我们可以在用完 ```git status``` 指令后用 ```get diff``` 指令查看文件的具体改动。

#### 版本管理
- ```git log```
这个指令可以显示从最近到最远的提交日志，如果嫌输出信息太多，不方便查看，可以加上 ```--pretty=oneline``` 参数，这样就只会显示 ```commit id``` （版本号）和提交说明。例如：
    ```
    git log --pretty=oneline
    1094adb7b9b3807259d8cb349e7df1d4d6477073 (HEAD -> master) append GPL
    e475afc93c209a690c39c13a46716e8fa000c366 add distributed    eaadf4e385e865d25c48e7ca9c8395c3f7dfaef0 wrote a readme file
    ```  

- ```git reflog```  
这个指令可以记录我们的每一次指令操作，适合我们在关闭 ```git bash``` 命令行后想要再次查找过往的版本号时使用。

- ```git reset --<回退参数> <commit id>```  
这个指令可以将工作区和分支中的代码回退到指定的版本号，而根据回退参数的不同，又可以具体分成几种回退方式：
    - **--hard** ：回退到上个版本的已提交状态；
    - **--soft** ：回退到上个版本的未提交状态；
    - **--mixed** ：回退到上个版本已添加但未提交的状态。

#### 文件管理
- ```git checkout -- <file>```  
这个指令用于写错了工作区某个文件的内容，想直接丢弃工作区的修改时，这里有两种情况：
    - 一种是文件自修改后还没有被放到暂存区，现在，撤销修改就回到和版本库一模一样的状态，即让这个文件回到最近一次git commit时的状态；
    - 一种是文件已经添加到暂存区后，又作了修改，现在，撤销修改就回到添加到暂存区后的状态，即让这个文件回到最近一次git add时的状态。

    **注意**：这个指令中的--很重要，没有--，就变成了“切换到另一个分支”的命令，我们在后面的分支管理中会再次遇到git checkout命令。

- ```git reset HEAD <file>```  
我们不难发现，用 ```git checkout -- <file>``` 指令不能将已经添加到暂存区的文件恢复成未添加到暂存区前，即把暂存区的修改unstage（撤销）掉，重新放回工作区。  
因此当我们不但改乱了工作区某个文件的内容，还添加到了暂存区时，想丢弃修改就需要先用这个指令回到未将文件添加到暂存区的时候，再用上面的 ```git checkout -- <file>``` 指令将文件退回到未修改的状态。

- ```git rm <file>```  
我们想删除工作区的文件时，可以用指令 ```rm <file>``` 或者直接将文件删除，这时，工作区和版本库的文件就不同了，这时候我们有两个选择:  
如果确认要删除该文件，那么就用 ```git rm``` 指令将文件删掉，并且 ```git commit``` 到版本库。  
如果是误删，那么就要用 ```git checkout``` 指令将文件回退回原来版本库中的情况。

#### 远程仓库管理
在我们给自己的Github账号添加上SSH Key之后，就可以自由地利用Github上的远程仓库来托管我们的代码，而为了正确使用远程仓库，我们需要学会一些指令。

- ```git remote add orgin git@github.com:<username>/<storage>```  
我们可以利用这个指令在本地已有的Git仓库中关联到指定的远程库，从而进行后续的代码提交和克隆。添加后，远程库的名字就是origin，这是Git默认的叫法，也可以改成别的，但是origin这个名字一看就知道是远程库。

- ```git push (-u) origin <branch>```  
我们可以利用这个指令将分支推送到远程库中，注意第一次提交一个分支的时候需要加上-u。

- ```git remote -v```  
我们可以利用这个指令来查看远程库的相关信息，方便后续的操作。

- ```git remote rm origin```
如果添加的时候地址写错了，或者就是想删除远程库，可以用这个命令。使用前，建议先用```git remote -v```查看一下远程库信息。此处的“删除”其实是解除了本地和远程的绑定关系，并不是物理上删除了远程库。远程库本身并没有任何改动。要真正删除远程库，需要登录到GitHub，在后台页面找到删除按钮再删除。

- ```git clone git@github.com:<username>/<storage>```   
除了将本地已有仓库关联到远程库以外，我们往往还会使用将远程库克隆到本地的方法来实现本地仓库与远程仓库的互联。

#### 分支管理
- ```git checkout -b <branch> / git switch -c <branch>```  
```git checkout```命令加上```-b```参数表示创建并切换，相当于以下两条命令：
    ```
    git branch <branch>
    git checkout <branch> / git switch <branch>
    ```

- ```git branch```  
这个命令会列出所有分支，当前分支前面会标一个*号。

- ```git merge <branch>```  
这个命令用于合并指定分支到当前分支。

- ```git branch -d <branch>```
这个命令用于删除指定分支。

#### 标签管理
- ```git tag```  
这个命令用于查看所有标签。注意，标签不是按时间顺序列出，而是按字母排序的。

- ```git tag <name>```  
这个命令用于给当前分支打上标签。除此之外，我们还可以灵活的使用这个命令，可以灵活的给过往版本号打标签```git tag <name> <commit id>```。还可以创建带有说明的标签，用```-a```指定标签名，```-m```指定说明文字。

- ```git show <tagname>```
这个命令用于查看指定标签的详细信息。标签总是和某个commit挂钩。如果这个commit既出现在master分支，又出现在dev分支，那么在这两个分支上都可以看到这个标签。

- ```git tag -d <tagname>```
这个命令可以删除标签。因为创建的标签都只存储在本地，不会自动推送到远程。所以，打错的标签可以在本地安全删除。

- ```git push origin <tagname> / --tags```
如果要推送某个标签到远程，可以使用这个命令。或者，用```--tags```参数一次性推送全部尚未推送到远程的本地标签。如果标签已经推送到远程，要删除远程标签就麻烦一点，先从本地删除：然后，从远程删除。删除命令也是push，但是格式如下：
    ```
    git push origin :refs/tags/<tagname>
    ```

